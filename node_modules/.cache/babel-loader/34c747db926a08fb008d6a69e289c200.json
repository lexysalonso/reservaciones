{"ast":null,"code":"import storage from \"./storage\";\nimport axios from \"axios\";\nimport useAxiosInstance from \"hooks/useAxiosInstance\";\nconst method = {\n  GET: \"GET\",\n  POST: \"POST\",\n  PUT: \"PUT\",\n  DEL: \"DELETE\"\n};\nconst instance = useAxiosInstance();\n\nconst requestAsync = async (method, endpoint, body) => {\n  let requestOptions = {\n    mode: \"cors\",\n    method: method,\n    headers: header(),\n    data: body ? JSON.stringify(body) : false\n  };\n  if (!requestOptions.data) delete requestOptions.data;\n\n  try {\n    let result = await instance(process.env.REACT_APP_BACKEND + endpoint, requestOptions);\n    let data = await result.data;\n    return data;\n  } catch (err) {\n    let error = true;\n    let status = err.response.status || \"00\";\n    let statusText = err.response.statusText || \"ocurrio un error\";\n    return {\n      error,\n      status,\n      statusText\n    };\n  }\n};\n\nconst get = endpoint => requestAsync(method.GET, endpoint);\n\nconst post = (endpoint, body) => requestAsync(method.POST, endpoint, body);\n\nconst put = (endpoint, body) => requestAsync(method.PUT, endpoint, body);\n\nconst del = (endpoint, body) => requestAsync(method.DEL, endpoint, body);\n\nconst header = () => {\n  let token;\n  let data = storage.load(storage.Keys.auth);\n  console.log(\"ver token\", data);\n\n  if (data) {\n    token = data;\n  }\n\n  let header = {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\"\n  };\n\n  if (token) {\n    console.log(\"ver aqui token\", token);\n    Object.assign(header, {\n      Authorization: \"Bearer \" + token\n    });\n  }\n\n  console.log(\"ver headrszadas\", header);\n  return header;\n};\n/* const header = () => {\n  let options = {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\",\n    \n  };\n  let token = load(keys.auth);\n  if (token) {\n    let tokenhead = {\n      Autorization: \"Bearer \" + token,\n    };\n    const header = { ...options, ...tokenhead };\n    return header;\n  }\n}; */\n\n\nexport default {\n  get,\n  post,\n  put,\n  del\n};","map":{"version":3,"sources":["/media/lmdiaz/bd47588f-a8f9-4e55-b2d4-112c4f385fdf/Lexys/Programacion/proyecto/Reservaciones/Reservaciones-bootstrap/src/helpers/servicesAxios.js"],"names":["storage","axios","useAxiosInstance","method","GET","POST","PUT","DEL","instance","requestAsync","endpoint","body","requestOptions","mode","headers","header","data","JSON","stringify","result","process","env","REACT_APP_BACKEND","err","error","status","response","statusText","get","post","put","del","token","load","Keys","auth","console","log","Accept","Object","assign","Authorization"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,gBAAP,MAA6B,wBAA7B;AAGA,MAAMC,MAAM,GAAG;AACbC,EAAAA,GAAG,EAAE,KADQ;AAEbC,EAAAA,IAAI,EAAE,MAFO;AAGbC,EAAAA,GAAG,EAAE,KAHQ;AAIbC,EAAAA,GAAG,EAAE;AAJQ,CAAf;AAOA,MAAMC,QAAQ,GAAGN,gBAAgB,EAAjC;;AAEA,MAAMO,YAAY,GAAG,OAAON,MAAP,EAAeO,QAAf,EAAyBC,IAAzB,KAAkC;AACrD,MAAIC,cAAc,GAAG;AACnBC,IAAAA,IAAI,EAAE,MADa;AAEnBV,IAAAA,MAAM,EAAEA,MAFW;AAGnBW,IAAAA,OAAO,EAAEC,MAAM,EAHI;AAInBC,IAAAA,IAAI,EAAEL,IAAI,GAAGM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAH,GAA0B;AAJjB,GAArB;AAMA,MAAI,CAACC,cAAc,CAACI,IAApB,EAA0B,OAAOJ,cAAc,CAACI,IAAtB;;AAC1B,MAAI;AACF,QAAIG,MAAM,GAAG,MAAMX,QAAQ,CACzBY,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgCZ,QADP,EAEzBE,cAFyB,CAA3B;AAKA,QAAII,IAAI,GAAG,MAAMG,MAAM,CAACH,IAAxB;AACA,WAAOA,IAAP;AACD,GARD,CAQE,OAAOO,GAAP,EAAY;AACZ,QAAIC,KAAK,GAAG,IAAZ;AACA,QAAIC,MAAM,GAAGF,GAAG,CAACG,QAAJ,CAAaD,MAAb,IAAuB,IAApC;AACA,QAAIE,UAAU,GAAGJ,GAAG,CAACG,QAAJ,CAAaC,UAAb,IAA2B,kBAA5C;AACA,WAAO;AAAEH,MAAAA,KAAF;AAASC,MAAAA,MAAT;AAAiBE,MAAAA;AAAjB,KAAP;AACD;AACF,CAtBD;;AAyBA,MAAMC,GAAG,GAAIlB,QAAD,IAAeD,YAAY,CAACN,MAAM,CAACC,GAAR,EAAaM,QAAb,CAAvC;;AACA,MAAMmB,IAAI,GAAG,CAACnB,QAAD,EAAWC,IAAX,KAAoBF,YAAY,CAACN,MAAM,CAACE,IAAR,EAAcK,QAAd,EAAwBC,IAAxB,CAA7C;;AACA,MAAMmB,GAAG,GAAG,CAACpB,QAAD,EAAWC,IAAX,KAAoBF,YAAY,CAACN,MAAM,CAACG,GAAR,EAAaI,QAAb,EAAuBC,IAAvB,CAA5C;;AACA,MAAMoB,GAAG,GAAG,CAACrB,QAAD,EAAWC,IAAX,KAAoBF,YAAY,CAACN,MAAM,CAACI,GAAR,EAAaG,QAAb,EAAuBC,IAAvB,CAA5C;;AAEA,MAAMI,MAAM,GAAG,MAAM;AACnB,MAAIiB,KAAJ;AACA,MAAIhB,IAAI,GAAGhB,OAAO,CAACiC,IAAR,CAAajC,OAAO,CAACkC,IAAR,CAAaC,IAA1B,CAAX;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBrB,IAAxB;;AACA,MAAIA,IAAJ,EAAU;AACRgB,IAAAA,KAAK,GAAGhB,IAAR;AACD;;AACD,MAAID,MAAM,GAAG;AACX,oBAAgB,kBADL;AAEXuB,IAAAA,MAAM,EAAE;AAFG,GAAb;;AAIA,MAAIN,KAAJ,EAAW;AACTI,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6BL,KAA7B;AACAO,IAAAA,MAAM,CAACC,MAAP,CAAczB,MAAd,EAAsB;AAAE0B,MAAAA,aAAa,EAAE,YAAYT;AAA7B,KAAtB;AACD;;AACDI,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BtB,MAA/B;AACA,SAAOA,MAAP;AACD,CAjBD;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,eAAe;AAAEa,EAAAA,GAAF;AAAOC,EAAAA,IAAP;AAAaC,EAAAA,GAAb;AAAkBC,EAAAA;AAAlB,CAAf","sourcesContent":["import storage from \"./storage\";\nimport axios from \"axios\";\nimport useAxiosInstance from \"hooks/useAxiosInstance\";\n\n\nconst method = {\n  GET: \"GET\",\n  POST: \"POST\",\n  PUT: \"PUT\",\n  DEL: \"DELETE\",\n};\n\nconst instance = useAxiosInstance();\n\nconst requestAsync = async (method, endpoint, body) => {\n  let requestOptions = {\n    mode: \"cors\",\n    method: method,\n    headers: header(),\n    data: body ? JSON.stringify(body) : false,\n  };\n  if (!requestOptions.data) delete requestOptions.data;\n  try {\n    let result = await instance(\n      process.env.REACT_APP_BACKEND + endpoint,\n      requestOptions\n    );\n    \n    let data = await result.data;\n    return data;\n  } catch (err) {\n    let error = true;\n    let status = err.response.status || \"00\";\n    let statusText = err.response.statusText || \"ocurrio un error\";\n    return { error, status, statusText };\n  }\n};\n\n\nconst get = (endpoint) =>  requestAsync(method.GET, endpoint);\nconst post = (endpoint, body) => requestAsync(method.POST, endpoint, body);\nconst put = (endpoint, body) => requestAsync(method.PUT, endpoint, body);\nconst del = (endpoint, body) => requestAsync(method.DEL, endpoint, body);\n\nconst header = () => {\n  let token;\n  let data = storage.load(storage.Keys.auth);\n  console.log(\"ver token\",data)\n  if (data) {\n    token = data;\n  }\n  let header = {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\",\n  };\n  if (token) {\n    console.log(\"ver aqui token\",token)\n    Object.assign(header, { Authorization: \"Bearer \" + token });\n  }\n  console.log(\"ver headrszadas\", header);\n  return header;\n};\n\n\n\n/* const header = () => {\n  let options = {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\",\n    \n  };\n  let token = load(keys.auth);\n  if (token) {\n    let tokenhead = {\n      Autorization: \"Bearer \" + token,\n    };\n    const header = { ...options, ...tokenhead };\n    return header;\n  }\n}; */\nexport default { get, post, put, del };\n"]},"metadata":{},"sourceType":"module"}