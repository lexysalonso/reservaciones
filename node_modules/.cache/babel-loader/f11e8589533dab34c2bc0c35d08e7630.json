{"ast":null,"code":"import { keys, load } from \"./storage\";\nimport axios from \"axios\";\nconst method = {\n  GET: \"GET\",\n  POST: \"POST\",\n  PUT: \"PUT\",\n  DEL: \"DELETE\"\n};\n\nconst get = endpoint => requestAsync(method.GET, endpoint);\n\nconst post = (endpoint, body) => requestAsync(method.POST, endpoint, body);\n\nconst put = (endpoint, body) => requestAsync(method.PUT, endpoint, body);\n\nconst del = (endpoint, body) => requestAsync(method.DEL, endpoint, body);\n\nconst requestAsync = async (method, endpoint, body) => {\n  let requestOptions = {\n    headers: header(),\n    body: body ? JSON.stringify(body) : false,\n    method: method\n  };\n  if (!requestOptions.body) delete requestOptions.body;\n  console.log(\"ver request UNO\", requestOptions);\n  return fetch(process.env.REACT_APP_BACKEND + endpoint, requestOptions).then(res => res.ok ? res.json() : Promise.reject({\n    err: true,\n    status: res.status || \"00\",\n    statusText: res.statusText || \"ocurrio un error\"\n  })).catch(err => err);\n};\n/* const header = () => {\n  let options = {\n    \"Content-Type\": \"application/json\",\n    accept: \"application/json\",\n  };\n  let token = load(keys.auth);\n  if (token) {\n     Object.assign(header, { Authorization: \"Bearer \" + token });\n    /* let tokenhead = {\n      Autorization: \"Bearer \" + token,\n    };\n    const header = { ...options , ...tokenhead }; */\n\n/*  return header;\n}\n} */\n\n\nconst header = () => {\n  let token;\n  let data = load(keys.auth);\n\n  if (data && data) {\n    token = data;\n  }\n\n  let header = {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\"\n  };\n\n  if (token) {\n    Object.assign(header, {\n      Authorization: \"Bearer \" + token\n    });\n  }\n\n  console.log(\"ver headrs\", header);\n  return header;\n};\n\nexport default {\n  get,\n  post,\n  put,\n  del\n};","map":{"version":3,"sources":["/media/lmdiaz/bd47588f-a8f9-4e55-b2d4-112c4f385fdf/Lexys/Programacion/proyecto/Reservaciones/Reservaciones-bootstrap/src/helpers/services.js"],"names":["keys","load","axios","method","GET","POST","PUT","DEL","get","endpoint","requestAsync","post","body","put","del","requestOptions","headers","header","JSON","stringify","console","log","fetch","process","env","REACT_APP_BACKEND","then","res","ok","json","Promise","reject","err","status","statusText","catch","token","data","auth","Accept","Object","assign","Authorization"],"mappings":"AAAA,SAASA,IAAT,EAAeC,IAAf,QAA2B,WAA3B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,MAAM,GAAG;AACbC,EAAAA,GAAG,EAAE,KADQ;AAEbC,EAAAA,IAAI,EAAE,MAFO;AAGbC,EAAAA,GAAG,EAAE,KAHQ;AAIbC,EAAAA,GAAG,EAAE;AAJQ,CAAf;;AAOA,MAAMC,GAAG,GAAIC,QAAD,IAAcC,YAAY,CAACP,MAAM,CAACC,GAAR,EAAaK,QAAb,CAAtC;;AACA,MAAME,IAAI,GAAG,CAACF,QAAD,EAAWG,IAAX,KAAoBF,YAAY,CAACP,MAAM,CAACE,IAAR,EAAcI,QAAd,EAAwBG,IAAxB,CAA7C;;AACA,MAAMC,GAAG,GAAG,CAACJ,QAAD,EAAWG,IAAX,KAAoBF,YAAY,CAACP,MAAM,CAACG,GAAR,EAAaG,QAAb,EAAuBG,IAAvB,CAA5C;;AACA,MAAME,GAAG,GAAG,CAACL,QAAD,EAAWG,IAAX,KAAoBF,YAAY,CAACP,MAAM,CAACI,GAAR,EAAaE,QAAb,EAAuBG,IAAvB,CAA5C;;AAEA,MAAMF,YAAY,GAAG,OAAOP,MAAP,EAAeM,QAAf,EAAyBG,IAAzB,KAAkC;AACrD,MAAIG,cAAc,GAAG;AACnBC,IAAAA,OAAO,EAAEC,MAAM,EADI;AAEnBL,IAAAA,IAAI,EAAEA,IAAI,GAAGM,IAAI,CAACC,SAAL,CAAeP,IAAf,CAAH,GAA0B,KAFjB;AAGnBT,IAAAA,MAAM,EAAEA;AAHW,GAArB;AAKA,MAAI,CAACY,cAAc,CAACH,IAApB,EAA0B,OAAOG,cAAc,CAACH,IAAtB;AAE1BQ,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA8BN,cAA9B;AAEA,SAAOO,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,iBAAZ,GAAgChB,QAAjC,EAA2CM,cAA3C,CAAL,CACJW,IADI,CACEC,GAAD,IACJA,GAAG,CAACC,EAAJ,GACID,GAAG,CAACE,IAAJ,EADJ,GAEIC,OAAO,CAACC,MAAR,CAAe;AACbC,IAAAA,GAAG,EAAE,IADQ;AAEbC,IAAAA,MAAM,EAAEN,GAAG,CAACM,MAAJ,IAAc,IAFT;AAGbC,IAAAA,UAAU,EAAEP,GAAG,CAACO,UAAJ,IAAkB;AAHjB,GAAf,CAJD,EAUJC,KAVI,CAUGH,GAAD,IAASA,GAVX,CAAP;AAWD,CArBD;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACE;AACF;AACA;;;AAEA,MAAMf,MAAM,GAAG,MAAM;AACnB,MAAImB,KAAJ;AACA,MAAIC,IAAI,GAAGpC,IAAI,CAACD,IAAI,CAACsC,IAAN,CAAf;;AACA,MAAID,IAAI,IAAIA,IAAZ,EAAkB;AAChBD,IAAAA,KAAK,GAAGC,IAAR;AACD;;AACD,MAAIpB,MAAM,GAAG;AACX,oBAAgB,kBADL;AAEXsB,IAAAA,MAAM,EAAE;AAFG,GAAb;;AAIA,MAAIH,KAAJ,EAAW;AACTI,IAAAA,MAAM,CAACC,MAAP,CAAcxB,MAAd,EAAsB;AAAEyB,MAAAA,aAAa,EAAE,YAAYN;AAA7B,KAAtB;AACD;;AACDhB,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BJ,MAA1B;AACA,SAAOA,MAAP;AACD,CAfD;;AAiBA,eAAe;AAAET,EAAAA,GAAF;AAAOG,EAAAA,IAAP;AAAaE,EAAAA,GAAb;AAAkBC,EAAAA;AAAlB,CAAf","sourcesContent":["import { keys, load } from \"./storage\";\nimport axios from \"axios\";\n\nconst method = {\n  GET: \"GET\",\n  POST: \"POST\",\n  PUT: \"PUT\",\n  DEL: \"DELETE\",\n};\n\nconst get = (endpoint) => requestAsync(method.GET, endpoint);\nconst post = (endpoint, body) => requestAsync(method.POST, endpoint, body);\nconst put = (endpoint, body) => requestAsync(method.PUT, endpoint, body);\nconst del = (endpoint, body) => requestAsync(method.DEL, endpoint, body);\n\nconst requestAsync = async (method, endpoint, body) => {\n  let requestOptions = {\n    headers: header(),\n    body: body ? JSON.stringify(body) : false,\n    method: method,\n  };\n  if (!requestOptions.body) delete requestOptions.body;\n   \n  console.log(\"ver request UNO\",requestOptions)\n\n  return fetch(process.env.REACT_APP_BACKEND + endpoint, requestOptions)\n    .then((res) =>\n      res.ok\n        ? res.json()\n        : Promise.reject({\n            err: true,\n            status: res.status || \"00\",\n            statusText: res.statusText || \"ocurrio un error\",\n          })\n    )\n    .catch((err) => err);\n};\n\n/* const header = () => {\n  let options = {\n    \"Content-Type\": \"application/json\",\n    accept: \"application/json\",\n  };\n  let token = load(keys.auth);\n  if (token) {\n     Object.assign(header, { Authorization: \"Bearer \" + token });\n    /* let tokenhead = {\n      Autorization: \"Bearer \" + token,\n    };\n    const header = { ...options , ...tokenhead }; */\n  /*  return header;\n  }\n} */\n\nconst header = () => {\n  let token;\n  let data = load(keys.auth);\n  if (data && data) {\n    token = data;\n  }\n  let header = {\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\",\n  };\n  if (token) {\n    Object.assign(header, { Authorization: \"Bearer \" + token });\n  }\n  console.log(\"ver headrs\", header);\n  return header;\n};\n\nexport default { get, post, put, del };\n"]},"metadata":{},"sourceType":"module"}